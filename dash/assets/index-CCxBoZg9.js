import{r as l,a as k,j as e,u as _,b as E,B as T,t as b,e as $}from"./index-B6KNdpHc.js";import{B as V}from"./ButtonWhiteComponent-CMREZW0u.js";import{c as z,m as O}from"./CryptomusActions-BsXaZcOK.js";import{D as W}from"./DashboardLoading-D7ABqY3W.js";/* empty css              */const q=({showModal:x,closeModal:h,promoCode:t,realPrice:u,discountPercentage:p})=>{const o=l.useRef(null),f=n=>{o.current&&!o.current.contains(n.target)&&h()},a=k(n=>n.toggle.theme);return e.jsx(e.Fragment,{children:e.jsx("div",{className:`transtion duration-300 ${x?"visible ":"invisible"} bg-color11  fixed top-0 left-0 w-screen h-screen z-10`,onClick:f,children:e.jsx("div",{ref:o,onClick:n=>n.stopPropagation(),className:`transition-transform duration-300 ${x?"opacity-100 scale-100":"opacity-0 scale-0"} ${a==="dark"?"bg-dark":"bg-lightCardBack border-lightBorder"} fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 max-w-2xl w-full bg-dark rounded-[32px]`,children:e.jsxs("div",{className:`${a==="dark"?"border-[#FFFFFF33] text-color29":"border-lightBorder text-lightFontColor"} py-12 px-8 border rounded-[32px] flex  flex-col items-center`,children:[t&&e.jsx("p",{className:"bg-lightInputBack border-[1px] border-lightBorder rounded-lg px-8 h-14 text-2xl flex items-center justify-center font-bold",children:t}),e.jsx("p",{children:u}),e.jsxs("p",{children:[p,"%"]}),e.jsx("p",{children:u-u*p/100}),e.jsx("div",{className:"text-center mt-7",children:e.jsx("button",{onClick:h,className:"transition duration-300 ease-in-out bg-color16 text-light w-[139px] h-9 rounded hover:bg-color7 hover:text-lightFontColor hover:scale-110",children:"Close"})})]})})})})},U=()=>{const x=_(),h=E(),t=k(s=>s.toggle.theme),p=k(s=>s.auth).price_list,[o,f]=l.useState(0),[a,n]=l.useState("1"),[c,P]=l.useState(""),[w,S]=l.useState(!1),[I,i]=l.useState(!1),[g,C]=l.useState(0),[m,v]=l.useState(!1),[A,N]=l.useState(!1),[j,y]=l.useState(0),D=()=>{x("/dashboard/managepayments")},B=(s,r)=>{r.target.checked&&f(s)},M=s=>{let d=s.target.value.replace(/[^0-9]/g,"");n(d)};l.useEffect(()=>{C(o===0?(parseInt(a)||0)*p[0].price:(parseInt(a)||0)*p[1].price*12)},[o,a]);const L=async()=>{if(!/^\d+$/.test(a)){b.warning("Please enter a valid number");return}if(v(!1),N(!1),c){i(!0);const r=$({promoCode:c});await h(z({encrypted:r})).then(d=>{console.log(d),d.status===200&&(v(!0),y(d.data.discount_percentage),i(!1)),d.status===202&&(N(!0),i(!1))})}else y(0),F()},F=async()=>{if(parseInt(a)===0){b.warning("The count cannot be zero.");return}i(!0);const s=$({count:parseInt(a)||0,plan:o,promoCode:m?c:""});await h(O({encrypted:s})).then(r=>{r.status===200&&(window.location.href=`${r.data.invoice_url}`,b.success("The invoice generation process has been completed successfully.")),r.status===201&&(b.success("The subscription has been successfully purchased."),x("/dashboard/managepayments")),i(!1)}).catch(()=>{i(!1)})},R=s=>{P(s.target.value)};return e.jsx(e.Fragment,{children:I?e.jsx(W,{text:"Loading"}):e.jsxs("div",{className:`${t==="dark"?"border-color8":"border-lightBorder"} overflow-x-auto w-full border-[1px] rounded-[12px]`,children:[e.jsx("div",{className:`${t==="dark"?" border-color8 bg-darkCardBack":"border-lightBorder bg-lightCardBack"} px-7 py-[30px] border-b rounded-t-xl`,children:e.jsx("p",{className:`${t==="dark"?"text-light":"text-lightFontColor"}`,children:"Manage Payment"})}),e.jsxs("div",{className:`${t==="dark"?"border-color8 text-color6":"border-lightBorder text-lightFontColor"} px-6 py-10 sm:p-12 bg-transparent flex flex-col gap-10`,children:[e.jsxs("div",{className:"grid gap-10 md:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col gap-10",children:[e.jsx("label",{className:"text-xl font-semibold",children:"Select Plan"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-8 sm:gap-16",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"custom-checkbox",checked:o===0,onChange:s=>B(0,s)}),e.jsx("span",{className:`${t==="dark"?"":"!border-lightBorder"} custom-checkbox`})]}),e.jsx("p",{className:`${t==="dark"?"text-light":"text-lightFontColor"} font-semibold text-2xl sm:text-4xl`,children:"Monthly"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"custom-checkbox",checked:o===1,onChange:s=>B(1,s)}),e.jsx("span",{className:`${t==="dark"?"":"!border-lightBorder"} custom-checkbox`})]}),e.jsx("p",{className:`${t==="dark"?"text-light":"text-lightFontColor"} font-semibold text-2xl sm:text-4xl`,children:"Annually"})]})]})]}),e.jsxs("div",{className:"flex items-end justify-end gap-2 ",children:[m&&e.jsx("p",{className:`${t==="dark"?"text-color6":"text-color8 "} mr-2 text-4xl line-through`,children:g.toFixed(1)}),e.jsxs("div",{className:`${t==="dark"?"text-light":"text-lightFontColor"} text-5xl relative`,children:[m?(g*(100-j)/100).toFixed(1):g.toFixed(1),m&&e.jsxs("p",{className:"absolute top-0 right-0 px-1 text-lg font-semibold rounded-full -translate-y-3/4 translate-x-3/4 bg-[#39ad29] text-light",children:["-",j,"%"]})]}),e.jsxs("p",{className:`${t==="dark"?"text-color6":"text-lightFontColor"} text-2xl`,children:["/",o===0?" Month":" Annual"]})]})]}),e.jsxs("div",{className:`${t==="dark"?"text-color6":"text-lightFontColor"} w-full grid md:grid-cols-2 gap-10`,children:[e.jsxs("div",{className:"flex flex-col col-span-1 gap-2",children:[e.jsx("label",{className:"text-[18px]",children:"Account Counts"}),e.jsx("input",{className:`${t==="dark"?"border-color4 bg-color7":"border-lightBorder bg-lightInputBack"} px-4 w-full h-[56px] focus:border-[1px] outline-none`,placeholder:"Input count",value:a,onChange:M})]}),e.jsxs("div",{className:"flex flex-col col-span-1 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-[18px]",children:"Promo Code"}),A&&e.jsx("span",{className:"text-red-500",children:"Invalid promo code"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{className:`${t==="dark"?"border-color4 bg-color7":"border-lightBorder bg-lightInputBack"} px-4 w-full h-[56px] focus:border-[1px] outline-none`,placeholder:"Input promo code",value:c,onChange:R}),e.jsx("button",{disabled:c==="",className:`h-12 px-8 ${t==="dark"?"bg-light text-lightFontColor hover:bg-lightFontColor hover:text-light hover:border-color8":"bg-lightFontColor text-light hover:bg-dark"} border font-medium rounded-lg transition-colors duration-300 ease-in-out`,onClick:L,children:"Apply"})]})]})]})]}),e.jsxs("div",{className:`${t==="dark"?"bg-darkCardBack text-color23  border-color8":"bg-lightCardBack text-lightFontColor border-lightBorder"} px-4 w-full h-[62px] flex items-center justify-between border-t-[1px] rounded-b-[12px]`,children:[e.jsx(V,{text:"Back",className:"w-[126px] h-[48px]",handleClick:D}),e.jsx(T,{text:"Purchase Plan",className:"w-[200px] h-[48px]",handleClick:F})]}),e.jsx(q,{showModal:w,closeModal:()=>S(!1),promoCode:c,realPrice:g,discountPercentage:j})]})})};export{U as default};
