import{a as L,j as e,u as W,b as E,r as i,B as q,e as a,t as z,d as Q}from"./index-kSryMGFi.js";import{r as X,u as Z,s as ee,t as te,v as se}from"./DashboardActions-Ct0U7ZN3.js";import{B as G}from"./ButtonWhiteComponent-CdcsYhZT.js";import{S as oe,R as le,F as re,L as ie}from"./LotRefinerSetting-Dug5fPsG.js";import{T as ae}from"./ToggleSwitch-BOxjohfP.js";/* empty css              */import"./stack-D1Wo7Beo.js";const Y=({text:l,isActive:s,tabNum:x,setCurTab:b})=>{const m=L(t=>t.toggle.theme);return e.jsx(e.Fragment,{children:e.jsx("button",{className:`px-2 h-[29px] rounded-[4px] font-medium text-xl
        ${m==="dark"?`${s?"text-lightFontColor bg-color5":"text-color6"}  hover:text-lightFontColor hover:bg-color5`:`${s?"text-lightFontColor bg-light":"text-lightFontColor"}  hover:text-lightFontColor hover:bg-light`} `,onClick:()=>b(x),children:l})})},ne=({curTab:l,setCurTab:s})=>{const x=L(b=>b.toggle.theme);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full overflow-auto select-none",children:e.jsxs("div",{className:`${x==="dark"?"bg-color10 border-color14":"bg-lightCardBack border-lightBorder"} px-6 w-[570px] h-[46px] flex items-center gap-6 border-[1px] rounded-[4px]`,children:[e.jsx(Y,{text:"Copy Settings",isActive:l===0,tabNum:0,setCurTab:s}),e.jsx(Y,{text:"Risk Settings",isActive:l===1,tabNum:1,setCurTab:s}),e.jsx(Y,{text:"Position Settings",isActive:l===2,tabNum:2,setCurTab:s})]})})})},ce=({data:l,clusterId:s,setIsChange:x})=>{const b=W(),m=E(),t=L(u=>u.auth),[h,p]=i.useState(0),[j,y]=i.useState(!1),[_,f]=i.useState([]);i.useEffect(()=>{let u=0;(async()=>{const S=a({user_id:t.user.id,copier_acc_id:l.copier_acc_id,copier_acc_type:l.copier_acc_type});await m(X({encrypted:S})).then(w=>{f(w),w.map((R,B)=>{R.account_id===w.copier_acc_id&&(u=B)}),p(u)})})(),y(l.status)},[l]);const v=async()=>{const u={contract_id:l.id,copier_acc_id:_[h].account_id,copier_acc_type:_[h].type,copier_acc_name:_[h].account_name,status:j},C=a(u);await m(Z({encrypted:C})).then(()=>{x(S=>!S),z.success("Updated successfully!")}).catch(()=>{})},k=()=>{b(`/dashboard/clusters/manage?cluster_id=${s}`)},N=()=>{y(!j)},c=L(u=>u.toggle.theme);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${c==="dark"?"border-color8":"border-lightBorder"} overflow-x-auto w-full border rounded-[12px]`,children:[e.jsx("div",{className:`${c==="dark"?"bg-darkCardBack text-color4":"bg-lightCardBack text-lightFontColor"} px-4 custom:px-8 w-full h-[88px] font-medium text-xl
          rounded-t-xl flex items-center justify-start`,children:"Copy Settings"}),e.jsxs("div",{className:`${c==="dark"?"text-color4 border-color8":"text-lightFontColor border-lightBorder"} py-10 px-8 custom:px-16 flex flex-col gap-8
          bg-transparent border-t-[1px] border-b-[1px]`,children:[e.jsx("div",{className:"w-full font-semibold text-xl flex justify-start",children:"Copy Settings"}),e.jsx(oe,{clusterMaster:l.master_acc_name,copyTo:h,setCopyTo:p,accountList:_}),e.jsx("div",{className:"w-full font-semibold text-xl flex justify-start",children:"Copy Status"}),e.jsx(ae,{status:j,handleChangeStatus:N})]}),e.jsxs("div",{className:`${c==="dark"?"bg-darkCardBack text-color4":"bg-lightCardBack text-lightFontColor"} px-8 w-full h-[88px] rounded-b-xl flex items-center justify-end gap-4`,children:[e.jsx(G,{text:"Back",className:"h-12 w-[150px]",handleClick:k}),e.jsx(q,{text:"Update",className:"h-12 w-[150px]",handleClick:v})]})]})})},de=({clusterId:l,data:s,setIsChange:x})=>{const b=W(),m=E(),[t,h]=i.useState("fixed_lot"),[p,j]=i.useState({fixed_lot:"0.01",lot_multiplier:"100",balance_multiplier:"100",fixed_balance_multiplier:"100"}),[y,_]=i.useState("100000"),[f,v]=i.useState(1),[k,N]=i.useState(1),[c,u]=i.useState("0"),[C,S]=i.useState("0"),[w,R]=i.useState(1),[B,o]=i.useState("0");i.useEffect(()=>{var g,F,$,P,M,I,T,V,A,D,U,H,J,K,O;s.risk_type&&h(s.risk_type),s.risk_type&&s.risk_setting&&j({...p,[s.risk_type]:s.risk_setting.toString()}),s.force_min_max&&(((g=s.force_min_max)==null?void 0:g.force_max)!==null&&v((F=s.force_min_max)!=null&&F.force_max?0:1),(($=s.force_min_max)==null?void 0:$.force_min)!==null&&N((P=s.force_min_max)!=null&&P.force_min?0:1),(M=s.force_min_max)!=null&&M.force_max_value&&u((I=s.force_min_max)!=null&&I.force_max_value?(T=s.force_min_max)==null?void 0:T.force_max_value:"0"),(V=s.force_min_max)!=null&&V.force_min_value&&S((A=s.force_min_max)!=null&&A.force_min_value?(D=s.force_min_max)==null?void 0:D.force_min_value:"0"),(U=s.force_min_max)!=null&&U.lot_refine&&R((H=s.force_min_max)!=null&&H.lot_refine?0:1),(J=s.force_min_max)!=null&&J.lot_refine_size&&o((K=s.force_min_max)!=null&&K.lot_refine_size?(O=s.force_min_max)==null?void 0:O.lot_refine_size:"0"))},[s]);const r=async()=>{let g=t==="fixed_lot"?p.fixed_lot:t==="lot_multiplier"?p.lot_multiplier:t==="balance_multiplier"?p.balance_multiplier:p.fixed_balance_multiplier;if(!g||parseFloat(g)<=0){z.warning("Please enter a positive value in the risk settings.");return}if(f===0&&(!c||parseFloat(c)<=0)){z.warning("Please enter a positive value in the force maximum lot size.");return}if(k===0&&(!C||parseFloat(C)<=0)){z.warning("Please enter a positive value in the force min lot size.");return}if(f===0&&k===0&&parseFloat(c)<parseFloat(C)){z.warning("The Force Maximum Lot Size must be greater than the Force Minimum Lot Size.");return}const F={encrypted_id:a(s.id),encrypted_riskType:a(t),encrypted_riskSetting:a(parseFloat(g)),encrypted_fixedMasterAccBalance:a(y?parseFloat(y):0),encrypted_isForceMax:a(f===0),encrypted_isForceMin:a(k===0),encrypted_forceMaxValue:a(f===0?c:"0"),encrypted_forceMinValue:a(k===0?C:"0"),encrypted_isLotRefine:a(w===0),encrypted_lotRefineSize:a(B===""?"0":B)};await m(ee(F)).then(()=>{z.success("Updated successfully"),x($=>!$)}).catch(()=>{})},d=()=>{b(`/dashboard/clusters/manage?cluster_id=${l}`)},n=L(g=>g.toggle.theme);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${n==="dark"?"border-color8":"border-lightBorder"} overflow-x-auto w-full border rounded-[12px]`,children:[e.jsx("div",{className:`${n==="dark"?"bg-darkCardBack text-color4":"bg-lightCardBack text-lightFontColor"} px-4 custom:px-8 w-full h-[88px] font-medium text-xl
          rounded-t-xl flex items-center justify-start`,children:"Risk Settings"}),e.jsxs("div",{className:`${n==="dark"?"text-color4 border-color8":"text-lightFontColor border-lightBorder"} py-10 px-8 custom:px-16 flex flex-col gap-8
          bg-transparent border-t-[1px] border-b-[1px]`,children:[e.jsx("div",{className:"w-full font-semibold text-xl flex justify-start",children:"Risk Settings"}),e.jsx(le,{riskType:t,setRiskType:h,riskSetting:p,fixedMasterAccBalance:y,setFixedMasterAccBalance:_,setRiskSetting:j}),e.jsx(re,{isForceMax:f,setIsForceMax:v,isForceMin:k,setIsForceMin:N,forceMaxValue:c,forceMinValue:C,setForceMaxValue:u,setForceMinValue:S}),e.jsx(ie,{isLotRefine:w,setIsLotRefine:R,lotRefineSize:B,setLotRefineSize:o})]}),e.jsxs("div",{className:`${n==="dark"?"bg-darkCardBack text-color23":"bg-lightCardBack text-lightFontColor"} px-8 w-full h-[88px] rounded-b-xl flex items-center justify-end gap-4`,children:[e.jsx(G,{text:"Back",className:"h-12 w-[150px]",handleClick:d}),e.jsx(q,{text:"Update",className:"h-12 w-[150px]",handleClick:r})]})]})})},pe=({data:l,setIsChange:s,clusterId:x})=>{const b=W(),m=E(),[t,h]=i.useState({copy_stop_loss:0,copy_take_profit:0,fixed_stop_loss:1,fixed_take_profit:1,stop_loss_refinement:1,take_profit_refinement:1}),[p,j]=i.useState("0"),[y,_]=i.useState("0"),[f,v]=i.useState("0"),[k,N]=i.useState("0");i.useEffect(()=>{var r,d,n,g,F,$,P,M,I,T,V,A,D,U;l.follow_tp_st&&(h({copy_stop_loss:((r=l.follow_tp_st)==null?void 0:r.stop_loss)===!0?0:1,copy_take_profit:((d=l.follow_tp_st)==null?void 0:d.take_profit)===!0?0:1,fixed_stop_loss:((n=l.follow_tp_st)==null?void 0:n.fixed_stop_loss)===!0?0:1,fixed_take_profit:((g=l.follow_tp_st)==null?void 0:g.fixed_take_profit)===!0?0:1,stop_loss_refinement:((F=l.follow_tp_st)==null?void 0:F.stop_loss_refinement)===!0?0:1,take_profit_refinement:(($=l.follow_tp_st)==null?void 0:$.take_profit_refinement)===!0?0:1}),j((P=l.follow_tp_st)!=null&&P.fixed_stop_loss_size?(M=l.follow_tp_st)==null?void 0:M.fixed_stop_loss_size:"0"),_((I=l.follow_tp_st)!=null&&I.fixed_take_profit_size?(T=l.follow_tp_st)==null?void 0:T.fixed_take_profit_size:"0"),v((V=l.follow_tp_st)!=null&&V.stop_loss_refinement_size?(A=l.follow_tp_st)==null?void 0:A.stop_loss_refinement_size:"0"),N((D=l.follow_tp_st)!=null&&D.take_profit_refinement_size?(U=l.follow_tp_st)==null?void 0:U.take_profit_refinement_size:"0"))},[]);const c=(r,d)=>{const n=parseInt(d);isNaN(n)||h(g=>({...g,[r]:n}))},u=r=>{let n=r.target.value.replace(/[^0-9]/g,"");j(n)},C=r=>{let n=r.target.value.replace(/[^0-9]/g,"");_(n)},S=r=>{const d=r.target.value;let n;d.startsWith("-")?n="-"+d.replace(/[^0-9]/g,""):n=d.replace(/[^0-9]/g,""),v(n)},w=r=>{const d=r.target.value;let n;d.startsWith("-")?n="-"+d.replace(/[^0-9]/g,""):n=d.replace(/[^0-9]/g,""),N(n)},R=async()=>{const r={encrypted_id:a(l.id),encrypted_takeProfit:a(t.copy_take_profit),encrypted_stopLoss:a(t.copy_stop_loss),encrypted_fixedStopLoss:a(t.fixed_stop_loss),encrypted_fixedTakeProfit:a(t.fixed_take_profit),encrypted_fixedStopLossSize:a(t.copy_stop_loss===0?p:"0"),encrypted_fixedTakeProfitSize:a(t.copy_take_profit===0?y:"0"),encrypted_stopLossRefinement:a(t.stop_loss_refinement),encrypted_takeProfitRefinement:a(t.take_profit_refinement),encrypted_stopLossRefinementSize:a(t.stop_loss_refinement===0?f:"0"),encrypted_takeProfitRefinementSize:a(t.take_profit_refinement===0?k:"0")};await m(te(r)).then(()=>{z.success("Updated successfully"),s(d=>!d)})},B=()=>{b(`/dashboard/clusters/manage?cluster_id=${x}`)},o=L(r=>r.toggle.theme);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${o==="dark"?"border-color8":"border-lightBorder"} overflow-x-auto w-full border-[1px] rounded-[12px]`,children:[e.jsx("div",{className:`${o==="dark"?"bg-darkCardBack text-color4":"bg-lightCardBack text-lightFontColor"} px-4 custom:px-8 w-full h-[88px] font-medium text-xl rounded-t-xl flex items-center justify-start`,children:"Position Settings"}),e.jsx("div",{className:`${o==="dark"?"text-color4 border-color8":"text-lightFontColor border-lightBorder"} py-10 px-8 custom:px-16 flex flex-col gap-8
          bg-transparent border-t-[1px] border-b-[1px]`,children:e.jsxs("div",{className:"grid w-full lg:grid-cols-2 gap-x-6 gap-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-[18px]",children:"Copy Stop Loss"}),e.jsx("div",{className:`${o==="dark"?"":'!bg-[url("/icons/down-arrow.png")] !bg-[length:15px_15px] !bg-[right_1rem_center] !bg-lightInputBack !border-lightBorder '} input-styled-select1`,children:e.jsxs("select",{className:`${o==="dark"?"":"!text-lightFontColor"} px-8 w-full`,onChange:r=>c("copy_stop_loss",r.target.value),value:t.copy_stop_loss,children:[e.jsx("option",{value:0,className:`${o==="dark"?"":"!bg-light"}`,children:"Yes"}),e.jsx("option",{value:1,className:`${o==="dark"?"":"!bg-light"}`,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-[18px]",children:"Copy Take Profit"}),e.jsx("div",{className:`${o==="dark"?"":'!bg-[url("/icons/down-arrow.png")] !bg-[length:15px_15px] !bg-[right_1rem_center] !bg-lightInputBack !border-lightBorder '} input-styled-select1`,children:e.jsxs("select",{className:`${o==="dark"?"":"!text-lightFontColor"} px-8 w-full`,value:t.copy_take_profit,onChange:r=>c("copy_take_profit",r.target.value),children:[e.jsx("option",{value:0,className:`${o==="dark"?"":"!bg-light"}`,children:"Yes"}),e.jsx("option",{value:1,className:`${o==="dark"?"":"!bg-light"}`,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-[18px]",children:"Fixed Stop Loss"}),e.jsx("div",{className:`${o==="dark"?"":'!bg-[url("/icons/down-arrow.png")] !bg-[length:15px_15px] !bg-[right_1rem_center] !bg-lightInputBack !border-lightBorder '} input-styled-select1`,children:e.jsxs("select",{disabled:t.copy_stop_loss===1,className:`${o==="dark"?"":"!text-lightFontColor"} px-8 w-full`,onChange:r=>c("fixed_stop_loss",r.target.value),value:t.fixed_stop_loss,children:[e.jsx("option",{value:0,className:`${o==="dark"?"":"!bg-light"}`,children:"Yes"}),e.jsx("option",{value:1,className:`${o==="dark"?"":"!bg-light"}`,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-[18px]",children:"Fixed Stop Loss Size (pips)"}),e.jsx("input",{disabled:t.fixed_stop_loss===1,className:`${o==="dark"?`bg-darkCardBack ${t.fixed_stop_loss===1||t.copy_stop_loss===1?"text-color6":"text-light"}`:"bg-lightCardBack border-lightBorder text-lightFontColor"} 
              px-8 w-full h-[56px] rounded-lg outline-none select-none `,placeholder:"Input Account Name",value:p,onChange:u})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-[18px]",children:"Fixed Take Profit"}),e.jsx("div",{className:`${o==="dark"?"":'!bg-[url("/icons/down-arrow.png")] !bg-[length:15px_15px] !bg-[right_1rem_center] !bg-lightInputBack !border-lightBorder '} input-styled-select1`,children:e.jsxs("select",{disabled:t.copy_take_profit===1,className:`${o==="dark"?"":"!text-lightFontColor"} px-8 w-full`,onChange:r=>c("fixed_take_profit",r.target.value),value:t.fixed_take_profit,children:[e.jsx("option",{value:0,className:`${o==="dark"?"":"!bg-light"}`,children:"Yes"}),e.jsx("option",{value:1,className:`${o==="dark"?"":"!bg-light"}`,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-[18px]",children:"Fixed Take Profit Size (pips)"}),e.jsx("input",{disabled:t.fixed_take_profit===1,className:`${o==="dark"?`bg-darkCardBack ${t.fixed_take_profit===1||t.copy_take_profit===1?"text-color6":"text-light"}`:"bg-lightCardBack border-lightBorder text-lightFontColor"} 
              px-8 w-full h-[56px] rounded-lg outline-none select-none `,placeholder:"Input Account Name",value:y,onChange:C})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-[18px]",children:"Stop Loss Refinement"}),e.jsx("div",{className:`${o==="dark"?"":'!bg-[url("/icons/down-arrow.png")] !bg-[length:15px_15px] !bg-[right_1rem_center] !bg-lightInputBack !border-lightBorder '} input-styled-select1`,children:e.jsxs("select",{disabled:t.copy_stop_loss===1,className:`${o==="dark"?"":"!text-lightFontColor"} px-8 w-full`,onChange:r=>c("stop_loss_refinement",r.target.value),value:t.stop_loss_refinement,children:[e.jsx("option",{value:0,className:`${o==="dark"?"":"!bg-light"}`,children:"Yes"}),e.jsx("option",{value:1,className:`${o==="dark"?"":"!bg-light"}`,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-[18px]",children:"Stop Loss Refinement Size (pips)"}),e.jsx("input",{disabled:t.stop_loss_refinement===1,className:`${o==="dark"?`bg-darkCardBack ${t.copy_stop_loss===1||t.stop_loss_refinement===1?"text-color6":"text-light"}`:"bg-lightCardBack border-lightBorder text-lightFontColor"} 
                    px-8 w-full h-[56px] rounded-lg outline-none select-none `,placeholder:"Input Account Name",value:f,onChange:S})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-[18px]",children:"Take Profit Refinement"}),e.jsx("div",{className:`${o==="dark"?"":'!bg-[url("/icons/down-arrow.png")] !bg-[length:15px_15px] !bg-[right_1rem_center] !bg-lightInputBack !border-lightBorder '} input-styled-select1`,children:e.jsxs("select",{disabled:t.copy_take_profit===1,className:`${o==="dark"?"":"!text-lightFontColor"} px-8 w-full`,onChange:r=>c("take_profit_refinement",r.target.value),value:t.take_profit_refinement,children:[e.jsx("option",{value:0,className:`${o==="dark"?"":"!bg-light"}`,children:"Yes"}),e.jsx("option",{value:1,className:`${o==="dark"?"":"!bg-light"}`,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-[18px]",children:"Take Profit Refinement Size (pips)"}),e.jsx("input",{disabled:t.take_profit_refinement===1,className:`${o==="dark"?`bg-darkCardBack ${t.copy_take_profit===1||t.take_profit_refinement===1?"text-color6":"text-light"}`:"bg-lightCardBack border-lightBorder text-lightFontColor"} 
                    px-8 w-full h-[56px] rounded-lg outline-none select-none `,placeholder:"Input Account Name",value:k,onChange:w})]})]})}),e.jsxs("div",{className:`${o==="dark"?"bg-darkCardBack text-color4":"bg-lightCardBack text-lightFontColor"} px-8 w-full h-[88px] rounded-b-xl flex items-center justify-end gap-4`,children:[e.jsx(G,{text:"Back",className:"h-12 w-[150px]",handleClick:B}),e.jsx(q,{text:"Update",className:"h-12 w-[150px]",handleClick:R})]})]})})},ke=()=>{const[l,s]=Q(),[x,b]=i.useState(0),[m,t]=i.useState({id:0,copier_acc_id:"",copier_acc_name:"",copier_acc_type:"",master_acc_id:"",master_acc_name:"",master_acc_type:"",follow_tp_st:{},force_min_max:{},risk_type:"",risk_setting:0,status:!1}),h=E(),[p,j]=i.useState(0),[y,_]=i.useState(!1);return i.useEffect(()=>{const f=l.get("cluster_id"),v=l.get("contract_id"),k=async()=>{const N=a({contract_id:v});await h(se({encrypted:N})).then(c=>{t(c)}).catch(()=>{})};v&&f&&(j(parseInt(f)),k())},[y]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col items-center gap-6",children:[e.jsx("div",{className:"mt-6"}),e.jsx(ne,{curTab:x,setCurTab:b}),x===0&&e.jsx(ce,{data:m,clusterId:p,setIsChange:_}),x===1&&e.jsx(de,{data:m,clusterId:p,setIsChange:_}),x===2&&e.jsx(pe,{data:m,setIsChange:_,clusterId:p})]})})};export{ke as default};
