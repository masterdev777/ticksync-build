import{d as q,u as W,b as G,a as b,r as t,j as e,B as H,e as s,t as u}from"./index-DauSMKcA.js";import{p as J,q as K}from"./DashboardActions-Df3wgi1u.js";import{B as O}from"./ButtonWhiteComponent-LQdu443F.js";import{S as Q,R as U,F as X,L as Y}from"./LotRefinerSetting-OjYaroBc.js";/* empty css              */import"./stack-D1Wo7Beo.js";const Z=()=>{const[g,ee]=q(),y=W(),C=G(),k=b(a=>a.auth),[r,F]=t.useState("lot_multiplier"),[c,M]=t.useState({fixed_lot:"0.01",lot_multiplier:"100",balance_multiplier:"100",fixed_balance_multiplier:"100"}),[f,j]=t.useState("100000"),[i,B]=t.useState(1),[o,v]=t.useState(1),[n,w]=t.useState("0"),[l,R]=t.useState("0"),[S,L]=t.useState(1),[h,A]=t.useState("0"),[d,N]=t.useState(0),[_,z]=t.useState(""),[I,P]=t.useState(""),[p,T]=t.useState([]);t.useEffect(()=>{const a=g.get("cluster_id"),m=g.get("cluster_master");a&&z(a),m&&P(m),(async()=>{const D=s({user_id:k.user.id});await C(J({encrypted:D})).then(E=>{T(E)})})()},[]);const V=async()=>{let a=r==="fixed_lot"?c.fixed_lot:r==="lot_multiplier"?c.lot_multiplier:r==="balance_multiplier"?c.balance_multiplier:c.fixed_balance_multiplier;if(!a||parseFloat(a)<=0){u.warning("Please enter a positive value in the risk settings.");return}if(i===0&&(!n||parseFloat(n)<=0)){u.warning("Please enter a positive value in the force maximum lot size.");return}if(o===0&&(!l||parseFloat(l)<=0)){u.warning("Please enter a positive value in the force min lot size.");return}if(i===0&&o===0&&parseFloat(n)<parseFloat(l)){u.warning("The Force Maximum Lot Size must be greater than the Force Minimum Lot Size.");return}const m={encrypted_clusterId:s(_),encrypted_copier_acc_name:s(p[d].account_name),encrypted_copier_acc_id:s(p[d].account_id),encrypted_copier_acc_type:s(p[d].type),encrypted_riskType:s(r),encrypted_riskSetting:s(parseFloat(a)),encrypted_fixedMasterAccBalance:s(f?parseFloat(f):0),encrypted_isForceMax:s(i===0),encrypted_isForceMin:s(o===0),encrypted_forceMaxValue:s(i===0?n:"0"),encrypted_forceMinValue:s(o===0?l:"0"),encrypted_isLotRefine:s(S===0),encrypted_lotRefineSize:s(h===""?"0":h)};await C(K(m)).then(()=>{u.success("Master Copier has been created successfully!"),y(`/dashboard/clusters/manage?cluster_id=${_}`)}).catch(()=>{})},$=()=>{y(`/dashboard/clusters/manage?cluster_id=${_}`)},x=b(a=>a.toggle.theme);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${x==="dark"?"border-color8":"border-lightBorder"} w-full border-[1px] rounded-xl`,children:[e.jsx("div",{className:`${x==="dark"?"bg-darkCardBack text-color23":"bg-lightCardBack text-lightFontColor"} px-4 custom:px-8 w-full h-[88px] font-medium text-xl 
           rounded-t-xl flex items-center justify-start`,children:"Add Copier"}),e.jsxs("div",{className:`${x==="dark"?"text-color4 border-color8":"text-lightFontColor border-lightBorder"} py-10 px-8 custom:px-16 flex flex-col gap-8
          bg-transparent border-t-[1px] border-b-[1px]`,children:[e.jsx("div",{className:"w-full font-semibold text-xl flex justify-start",children:"Copier Settings"}),e.jsx(Q,{clusterMaster:I,copyTo:d,setCopyTo:N,accountList:p}),e.jsx(U,{riskType:r,setRiskType:F,riskSetting:c,setRiskSetting:M,fixedMasterAccBalance:f,setFixedMasterAccBalance:j}),e.jsx(X,{isForceMax:i,setIsForceMax:B,isForceMin:o,setIsForceMin:v,forceMaxValue:n,forceMinValue:l,setForceMaxValue:w,setForceMinValue:R}),e.jsx(Y,{isLotRefine:S,setIsLotRefine:L,lotRefineSize:h,setLotRefineSize:A})]}),e.jsxs("div",{className:`${x==="dark"?"bg-darkCardBack text-color23":"bg-lightCardBack text-lightFontColor"} px-8 w-full h-[88px]  flex items-center justify-end gap-4`,children:[e.jsx(O,{text:"Back",className:"h-12 w-[150px]",handleClick:$}),e.jsx(H,{text:"Create",className:"h-12 w-[150px]",handleClick:V})]})]})})},ne=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col items-center gap-12",children:e.jsx(Z,{})})});export{ne as default};
