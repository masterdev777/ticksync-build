import{u as j,b as w,r as a,a as v,j as e,e as C,t as D,B as y}from"./index-B6KNdpHc.js";import{n as S,o as $}from"./DashboardActions-BWS3_lHX.js";import{h as _}from"./moment-C5S46NFB.js";import{D as B}from"./DeleteModal-F4QD6Isk.js";import{S as M}from"./SearchBarSm-dlM1wa-W.js";/* empty css              */import{D as L}from"./DashboardLoading-D7ABqY3W.js";const E=({cluster_id:d,cluster_name:i,acc_count:g,deploy_date:h,setChangeStatus:f})=>{const l=j(),m=w(),[c,u]=a.useState(!1),n=a.useRef(null);a.useEffect(()=>(document.addEventListener("click",o),()=>{document.removeEventListener("click",o)}),[]);const o=r=>{n.current&&!n.current.contains(r.target)&&u(!1)},p=()=>{l(`/dashboard/clusters/rename?cluster_id=${d}&cluster_name=${i}`)},b=()=>{l(`/dashboard/clusters/manage?cluster_id=${d}`)},[k,x]=a.useState(!1),s=async()=>{const r=C({cluster_id:d});await m(S({encrypted:r})).then(()=>{D.success("Cluster has been deleted successfully!"),f(N=>!N)})},t=v(r=>r.toggle.theme);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`${t==="dark"?"border-color8 bg-darkCardBack hover:border-light":"shadow-[0_0_30px_-10px] border-lightBorder bg-transparent hover:border-light"} relative p-8 w-full border  rounded-[12px]  select-none`,children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("h3",{className:`${t==="dark"?"text-light":"text-color26"} font-semibold text-2xl`,children:i}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[e.jsxs("div",{className:`${t==="dark"?"text-light ":"text-lightFontColor"} w-full sm:w-[115px] h-9 rounded-lg  flex items-center justify-center`,children:["Accounts : ",g]}),e.jsxs("div",{className:`${t==="dark"?"text-light bg-dark":"text-lightFontColor bg-lightCardBack"} w-full sm:w-[250px] py-3 px-3 rounded-lg  flex items-center justify-center`,children:["Deployment date : ",_(h).format("YYYY/MM/DD")]})]})]}),e.jsx("div",{className:"absolute top-3 right-3",ref:n,children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:`${t==="dark"?"bg-dark":"bg-lightCardBack"} w-8 h-8 rounded-lg bg-dark flex items-center justify-center gap-[3px] 
              border border-transparent hover:border-light cursor-pointer ${c?"border-light":""}`,onClick:()=>u(!c),children:[e.jsx("div",{className:`${t==="dark"?"bg-light":"bg-dark"} w-1 h-1 rounded-full `}),e.jsx("div",{className:`${t==="dark"?"bg-light":"bg-dark"} w-1 h-1 rounded-full `}),e.jsx("div",{className:`${t==="dark"?"bg-light":"bg-dark"} w-1 h-1 rounded-full `})]}),e.jsxs("div",{className:`${c?"":"hidden"} ${t==="dark"?"border-color8 bg-dark text-light":"border-color8 bg-light text-lightFontColor"} absolute p-[5px] right-0 border  rounded flex flex-col gap-[3px] `,children:[e.jsx("div",{className:"px-2 hover:bg-color7  w-[90px] font-semibold cursor-pointer",onClick:p,children:"Rename"}),e.jsx("div",{className:"px-2 hover:bg-color7  w-[90px] font-semibold cursor-pointer",onClick:b,children:"Manage"}),e.jsx("div",{className:"px-2 hover:bg-color7  w-[90px] font-semibold cursor-pointer",onClick:()=>x(!0),children:"Delete"})]})]})})]}),e.jsx(B,{showModal:k,closeModal:()=>x(!1),deleteItem:s,type:"cluster"})]})},z=()=>{const d=v(s=>s.auth),i=j(),g=w(),[h,f]=a.useState(""),[l,m]=a.useState([]),[c,u]=a.useState([]),[n,o]=a.useState(!1),[p,b]=a.useState(!1);a.useEffect(()=>{(async()=>{o(!0);const t=C({user_id:d.user.id});await g($({encrypted:t})).then(r=>{o(!1),m(r),u(r)}).catch(()=>{o(!1)})})()},[p]),a.useEffect(()=>{const s=c.filter(t=>t.name.toLowerCase().includes(h.toLowerCase()));m(s)},[h]);const k=()=>{i("/dashboard/clusters/create")},x=v(s=>s.toggle.theme);return e.jsx(e.Fragment,{children:n?e.jsx(L,{text:"Loading"}):e.jsxs("div",{className:"w-full flex flex-col items-center gap-6",children:[e.jsxs("div",{className:"mt-6 w-full flex-col sm:flex sm:flex-row sm:items-center sm:justify-between gap-6 sm:gap-0",children:[e.jsx(y,{text:"+ Add Cluster",className:"h-12 w-full max-w-[199px]",handleClick:k}),e.jsx("div",{className:"w-full sm:w-auto h-[48px] relative sm:static overflow-hidden max-sm:mt-5",children:e.jsx(M,{setSearch:f})})]}),(l==null?void 0:l.length)>0?e.jsx("div",{className:"w-full grid lg:grid-cols-2 gap-6",children:l.map((s,t)=>e.jsx(E,{cluster_id:s.id,cluster_name:s.name,deploy_date:s.deploy_date,acc_count:s.number_of_copier,setChangeStatus:b},s.name+t))}):e.jsx("div",{className:`${x==="dark"?"border-color8 bg-darkCardBack text-light":"border-lightBorder bg-transparent text-lightFontColor"} w-full h-[350px] border rounded-[8px] font-bold text-3xl flex items-center justify-center`,children:"No Data"})]})})};export{z as default};
