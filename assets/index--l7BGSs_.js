import{u as T,b as R,a as F,r as l,j as e,B as V,e as u,t as m}from"./index-B6KNdpHc.js";import{b as D,d as W,c as U}from"./CryptomusActions-BsXaZcOK.js";import{B as q}from"./ButtonWhiteComponent-CMREZW0u.js";import{D as G}from"./DashboardLoading-D7ABqY3W.js";import{h as H}from"./moment-C5S46NFB.js";/* empty css              */const ee=()=>{const N=T(),g=R(),f=F(s=>s.auth),d=f.user.subscription,v=f.price_list,[r,b]=l.useState(1),[S,x]=l.useState(!1),[_,C]=l.useState(!1),[p,I]=l.useState(""),[j,w]=l.useState(!1),[y,k]=l.useState(0),[n,$]=l.useState(0),[i,P]=l.useState(0),[A,B]=l.useState(f.user.subscription.next_billing_date);l.useEffect(()=>{b(d.count),(async a=>{const o=u({count:a});await g(D({encrypted:o})).then(c=>{P(c.data.remain_balance),$(c.data.add_price),B(c.data.billing_date)}).catch(()=>{})})(d.count)},[]),l.useEffect(()=>{(async a=>{const o=u({count:a});await g(D({encrypted:o})).then(c=>{P(c.data.remain_balance),$(c.data.add_price),B(c.data.billing_date)}).catch(()=>{})})(r)},[r]);const M=()=>{N("/dashboard/managepayments")},Y=s=>{let o=s.target.value.replace(/[^0-9]/g,"");b(o===""?0:parseInt(o))},z=async()=>{if(!/^\d+$/.test(r.toString())){m.warning("Please enter a valid number");return}if(r===d.count){m.warning("No Change.");return}if(r===0){m.warning("The count cannot be zero.");return}x(!0);const a=u({count:r,promoCode:j?p:""});await g(W({encrypted:a})).then(o=>{x(!1),o.status===200&&(m.success("The invoice generation process has been completed successfully."),window.location.href=`${o.data.invoice_url}`),o.status===202&&(m.success("The subscription has been successfully customized."),N("/dashboard/managepayments"))}).catch(()=>{x(!1)})},E=s=>{I(s.target.value)},L=async()=>{if(w(!1),C(!1),p){x(!0);const s=u({promoCode:p});await g(U({encrypted:s})).then(a=>{a.status===200&&(w(!0),k(a.data.discount_percentage),x(!1)),a.status===202&&(C(!0),x(!1))})}else k(0)},t=F(s=>s.toggle.theme),h=s=>{const a=s.toFixed(1);return a.endsWith(".0")?a.slice(0,-2):a};return e.jsx(e.Fragment,{children:S?e.jsx(G,{text:"Loading"}):e.jsxs("div",{className:`${t==="dark"?"border-color8":"border-lightBorder"} overflow-x-auto w-full border-[1px] rounded-[12px]`,children:[e.jsx("div",{className:`${t==="dark"?" border-color8 bg-darkCardBack":"border-lightBorder bg-lightCardBack"} px-7 py-[30px] border-b rounded-t-xl`,children:e.jsx("p",{className:`${t==="dark"?"text-light":"text-lightFontColor"}`,children:"Manage Payment"})}),e.jsxs("div",{className:`${t==="dark"?"border-color8 text-color6":"border-lightBorder text-lightFontColor"} px-6 py-10 sm:p-12 bg-transparent flex flex-col gap-10`,children:[e.jsxs("div",{className:"grid w-full gap-10 md:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col gap-10",children:[e.jsx("label",{className:"text-xl font-semibold",children:"Customize Your Plan"}),e.jsx("div",{className:"flex flex-wrap items-center gap-8 sm:gap-16",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("p",{className:`${t==="dark"?"text-light":"text-lightFontColor"} font-semibold text-2xl sm:text-4xl`,children:d.plan==="monthly"?"Monthly":"Annually"})})})]}),e.jsxs("div",{className:"flex flex-col items-center gap-10",children:[e.jsxs("div",{className:"flex flex-wrap items-end justify-end gap-2 text-xl",children:[e.jsx("span",{className:`${t==="dark"?"text-color6":"text-lightFontColor"}`,children:"Next Billing :"}),e.jsx("span",{className:`${t==="dark"?"text-light":"text-lightFontColor"} text-3xl font-semibold leading-8`,children:H(A).format("YYYY/MM/DD")})]}),e.jsxs("div",{className:"flex items-end justify-end gap-2",children:[e.jsxs("p",{className:`${t==="dark"?"text-light":"text-lightFontColor"} text-[44px] whitespace-nowrap text-ellipsis overflow-hidden w-[180px] leading-none text-right pr-2`,children:["$ ",d.plan==="monthly"?r*v[0].price:(r*v[1].price*12).toFixed(1)]}),e.jsxs("p",{className:`${t==="dark"?"text-color6":"text-lightFontColor"} text-2xl whitespace-nowrap`,children:["/",d.plan==="monthly"?" Month":" Annual"]})]})]})]}),e.jsxs("div",{className:`${t==="dark"?"text-color6":"text-lightFontColor"} w-full grid md:grid-cols-2 gap-10`,children:[e.jsxs("div",{className:"flex flex-col order-last gap-8 md:order-first",children:[e.jsxs("div",{className:"flex flex-col col-span-1 gap-2",children:[e.jsx("label",{className:"text-[18px]",children:"Account Counts"}),e.jsx("input",{className:`${t==="dark"?"border-color4 bg-color7":"border-lightBorder bg-lightInputBack"} px-4 w-full h-[56px] focus:border-[1px] outline-none`,placeholder:"Input count",value:r,onChange:Y})]}),e.jsxs("div",{className:"flex flex-col col-span-1 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-[18px]",children:"Promo Code"}),_&&e.jsx("span",{className:"text-red-500",children:"Invalid promo code"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{className:`${t==="dark"?"border-color4 bg-color7":"border-lightBorder bg-lightInputBack"} px-4 w-full h-[56px] focus:border-[1px] outline-none`,placeholder:"Input promo code",value:p,onChange:E}),e.jsx("button",{disabled:p==="",className:`h-12 px-8 ${t==="dark"?"bg-light text-lightFontColor hover:bg-lightFontColor hover:text-light hover:border-color8":"bg-lightFontColor text-light hover:bg-dark"} border font-medium rounded-lg transition-colors duration-300 ease-in-out`,onClick:L,children:"Apply"})]})]})]}),e.jsxs("div",{className:"flex flex-col items-center md:items-end",children:[e.jsx("div",{className:"px-2 pr-8 mb-4 text-xl font-semibold",children:"Payment Summary"}),e.jsxs("div",{className:"flex flex-col gap-2 px-2 py-4 pl-4 border-t border-b border-lightBorder",children:[e.jsxs("div",{className:"flex items-end justify-end",children:[e.jsx("label",{className:"text-[18px] text-right whitespace-nowrap",children:"Remain Balance :"}),e.jsxs("p",{className:`${t==="dark"?"text-light":"text-lightFontColor"} text-2xl font-semibold w-[100px] text-left whitespace-nowrap pl-2 overflow-hidden text-ellipsis`,children:["$ ",h(i)]})]}),e.jsxs("div",{className:"flex items-end justify-end",children:[e.jsx("label",{className:"text-[18px] text-right whitespace-nowrap",children:"Additional Price :"}),e.jsxs("p",{className:`${t==="dark"?"text-light":"text-lightFontColor"} text-2xl font-semibold w-[100px] text-left whitespace-nowrap pl-2 overflow-hidden text-ellipsis`,children:["$ ",h(n)]})]})]}),e.jsxs("div",{className:"px-2 py-4 ",children:[e.jsxs("div",{className:"flex items-end justify-end mb-2",children:[e.jsx("label",{className:"text-[18px] text-right",children:"Total :"}),e.jsxs("p",{className:` font-semibold w-[100px] text-left whitespace-nowrap pl-2 overflow-hidden text-ellipsis 
                        ${j&&i+n>0?`line-through text-xl ${t==="dark"?"":"text-lightFontColor"}`:`${i+n<=0?"line-through":""} text-2xl ${t==="dark"?"text-light":"text-lightFontColor"}`}`,children:["$ ",h(i+n)]})]}),i+n!==0&&(i+n<0?e.jsxs("div",{className:`${t==="dark"?"text-light":"text-lightFontColor"} text-sm pr-2 whitespace-nowrap`,children:[e.jsxs("span",{className:"text-xl font-semibold",children:["$",h(-(i+n))," "]})," ","Will Be Calculated In Next Payment"]}):j&&e.jsxs("div",{className:"flex items-start justify-end ",children:[e.jsxs("p",{className:"text-[#68e44f] px-2 py-1",children:[y,"% Promo "]}),e.jsxs("p",{className:`${t==="dark"?"text-light":"text-lightFontColor"} text-2xl font-semibold whitespace-nowrap w-[100px] pl-2 text-ellipsis overflow-hidden`,children:["$ ",h((i+n)*(100-y)/100)]})]}))]})]})]})]}),e.jsxs("div",{className:`${t==="dark"?"bg-darkCardBack text-color23  border-color8":"bg-lightCardBack text-lightFontColor border-lightBorder"} px-4 w-full h-[90px] flex items-center justify-end gap-10 border-t-[1px] rounded-b-[12px]`,children:[e.jsx(q,{text:"Back",className:"w-[200px] h-[48px]",handleClick:M}),e.jsx(V,{text:"Proceed",className:"w-[200px] h-[48px]",handleClick:z})]})]})})};export{ee as default};
